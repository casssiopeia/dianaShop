<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ - –†–µ—Ç—Ä–æ –∏ –í–∏–Ω—Ç–∞–∂</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <h1>–†–µ—Ç—Ä–æ –∏ –í–∏–Ω—Ç–∞–∂</h1>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="products.html">–¢–æ–≤–∞—Ä—ã</a></li>
                <li><a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="cart-count">0</span>)</a></li>
                <li><a href="orders.html">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a></li>
                <li><a href="complaint.html">–û–±—Ä–∞—â–µ–Ω–∏—è</a></li>
                <li><a href="info.html">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a></li>
                        </ul>
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="checkout-page">
                <h1>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
                <p class="page-subtitle">–ó–∞–≤–µ—Ä—à–∏—Ç–µ –≤–∞—à –∑–∞–∫–∞–∑, –∑–∞–ø–æ–ª–Ω–∏–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∏–∂–µ</p>
                
                <div class="checkout-content">
                    <div class="checkout-form-section">
                        <form id="checkout-form" class="checkout-form">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ -->
                            <section class="form-section">
                                <h2>üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ</h2>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="name">–§–ò–û *</label>
                                        <input type="text" id="name" name="name" required placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                                        <span class="error-message" id="name-error"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                                        <input type="tel" id="phone" name="phone" required placeholder="+7 (999) 999-99-99">
                                        <span class="error-message" id="phone-error"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Email *</label>
                                        <input type="email" id="email" name="email" required placeholder="ivanov@example.ru">
                                        <span class="error-message" id="email-error"></span>
                                    </div>
                                </div>
                            </section>

                            <!-- –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                            <section class="form-section">
                                <h2>üè† –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
                                <div class="form-group">
                                    <label for="address">–ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å *</label>
                                    <textarea id="address" name="address" required placeholder="–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1, –∫–≤. 1" rows="3"></textarea>
                                    <span class="error-message" id="address-error"></span>
                                </div>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="city">–ì–æ—Ä–æ–¥ *</label>
                                        <input type="text" id="city" name="city" required placeholder="–ú–æ—Å–∫–≤–∞">
                                    </div>
                                    <div class="form-group">
                                        <label for="postal-code">–ò–Ω–¥–µ–∫—Å</label>
                                        <input type="text" id="postal-code" name="postal-code" placeholder="123456">
                                    </div>
                                </div>
                            </section>

                            <!-- –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                            <section class="form-section">
                                <h2>üöö –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
                                <div class="delivery-options">
                                    <label class="delivery-option">
                                        <input type="radio" name="delivery" value="courier" checked>
                                        <div class="option-content">
                                            <span class="option-title">–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</span>
                                            <span class="option-price" id="delivery-courier-price">300 ‚ÇΩ</span>
                                            <span class="option-description">1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5000 ‚ÇΩ</span>
                                        </div>
                                    </label>
                                    <label class="delivery-option">
                                        <input type="radio" name="delivery" value="post">
                                        <div class="option-content">
                                            <span class="option-title">–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏</span>
                                            <span class="option-price">400 ‚ÇΩ</span>
                                            <span class="option-description">7-14 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏</span>
                                        </div>
                                    </label>
                                    <label class="delivery-option">
                                        <input type="radio" name="delivery" value="pickup">
                                        <div class="option-content">
                                            <span class="option-title">–°–∞–º–æ–≤—ã–≤–æ–∑</span>
                                            <span class="option-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                                            <span class="option-description">–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –í–∏–Ω—Ç–∞–∂–Ω–∞—è, –¥. 15</span>
                                        </div>
                                    </label>
                                </div>
                            </section>

                            <!-- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
                            <section class="form-section">
                                <h2>üí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h2>
                                <div class="payment-options">
                                    <label class="payment-option">
                                        <input type="radio" name="payment-method" value="card" checked>
                                        <div class="option-content">
                                            <span class="option-title">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</span>
                                            <span class="option-description">Visa, MasterCard, –ú–∏—Ä</span>
                                        </div>
                                    </label>
                                    <label class="payment-option">
                                        <input type="radio" name="payment-method" value="cash">
                                        <div class="option-content">
                                            <span class="option-title">–ù–∞–ª–æ–∂–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–µ–∂</span>
                                            <span class="option-description">–û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞</span>
                                        </div>
                                    </label>
                                    <label class="payment-option">
                                        <input type="radio" name="payment-method" value="online">
                                        <div class="option-content">
                                            <span class="option-title">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏</span>
                                            <span class="option-description">–ÆMoney, Qiwi</span>
                                        </div>
                                    </label>
                                </div>
                            </section>

                            <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É -->
                            <section class="form-section">
                                <h2>üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</h2>
                                <div class="form-group">
                                    <textarea id="comments" name="comments" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É, –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Ç.–¥." rows="4"></textarea>
                                </div>
                            </section>

                            <!-- –°–æ–≥–ª–∞—à–µ–Ω–∏—è -->
                            <section class="form-section">
                                <label class="checkbox-agreement">
                                    <input type="checkbox" id="privacy-policy" required>
                                    <span class="checkmark"></span>
                                    –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å <a href="info.html" target="_blank">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a> –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö *
                                </label>
                                <label class="checkbox-agreement">
                                    <input type="checkbox" id="terms" required>
                                    <span class="checkmark"></span>
                                    –Ø –ø—Ä–∏–Ω–∏–º–∞—é <a href="info.html" target="_blank">—É—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è</a> *
                                </label>
                            </section>

                            <button type="submit" class="btn submit-order-btn" id="submit-order">
                                <span>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </form>
                    </div>

                    <div class="order-summary-section">
                        <div class="summary-card">
                            <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>
                            
                            <div class="order-items-preview" id="order-items-preview">
                                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                            </div>
                            
                            <div class="summary-details">
                                <div class="summary-line">
                                    <span>–¢–æ–≤–∞—Ä—ã (<span id="summary-items-count">0</span>):</span>
                                    <span id="summary-items-total">0 ‚ÇΩ</span>
                                </div>
                                
                                <div class="summary-line">
                                    <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                                    <span id="summary-shipping">0 ‚ÇΩ</span>
                                </div>
                                
                                <div class="summary-line discount">
                                    <span>–°–∫–∏–¥–∫–∞:</span>
                                    <span>-<span id="summary-discount">0 ‚ÇΩ</span></span>
                                </div>
                                
                                <div class="summary-total">
                                    <span>–ö –æ–ø–ª–∞—Ç–µ:</span>
                                    <span id="summary-final-total">0 ‚ÇΩ</span>
                                </div>
                            </div>

                            <div class="security-badges">
                                <div class="security-badge">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                        <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                    <span>–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞</span>
                                </div>
                                <div class="security-badge">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2"/>
                                        <path d="M2 12C2 12 5 5 12 5C19 5 22 12 22 12C22 12 19 19 12 19C5 19 2 12 2 12Z" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                    <span>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (495) 123-45-67</p>
                    <p>Email: info@retro-vintage.ru</p>
                </div>
                <div class="footer-section">
                    <h4>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h4>
                    <p>–ü–Ω-–ü—Ç: 9:00-18:00</p>
                    <p>–°–±-–í—Å: 10:00-16:00</p>
                </div>
                <div class="footer-section">
                    <h4>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <p><a href="info.html">–í—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/app.js"></script>
    
    <script>
        // –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
        function updateCheckoutSummary() {
            const cart = RetroShop.cart;
            const itemsPreview = document.getElementById('order-items-preview');
            const itemsTotalElement = document.getElementById('summary-items-total');
            const itemsCountElement = document.getElementById('summary-items-count');
            const shippingElement = document.getElementById('summary-shipping');
            const finalTotalElement = document.getElementById('summary-final-total');
            const submitButton = document.getElementById('submit-order');

            if (!itemsPreview) return;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
            if (cart.items.length === 0) {
                itemsPreview.innerHTML = `
                    <div class="empty-cart-message">
                        <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                        <a href="products.html" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º</a>
                    </div>
                `;
                if (submitButton) submitButton.disabled = true;
                return;
            }

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã
            let itemsHTML = '';
            cart.items.forEach(item => {
                const itemTotal = item.price * item.quantity;
                itemsHTML += `
                    <div class="order-item-preview">
                        <div class="order-item-image">
                            <img src="${item.image}" alt="${item.name}" onerror="this.src='https://via.placeholder.com/60x60/2d2d2d/ffffff?text=–¢–æ–≤–∞—Ä'">
                        </div>
                        <div class="order-item-details">
                            <div class="order-item-name">${item.name}</div>
                            <div class="order-item-meta">${item.quantity} √ó ${RetroShop.utils.formatPrice(item.price)}</div>
                        </div>
                        <div class="order-item-total">${RetroShop.utils.formatPrice(itemTotal)}</div>
                    </div>
                `;
            });

            itemsPreview.innerHTML = itemsHTML;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É–º–º—ã
            if (itemsTotalElement) {
                itemsTotalElement.textContent = RetroShop.utils.formatPrice(cart.total);
            }
            
            if (itemsCountElement) {
                itemsCountElement.textContent = cart.itemCount;
            }

            // –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
            const deliveryRadios = document.querySelectorAll('input[name="delivery"]');
            let deliveryCost = 0;
            
            deliveryRadios.forEach(radio => {
                if (radio.checked) {
                    if (radio.value === 'courier') {
                        deliveryCost = cart.total >= RetroShop.config.freeShippingAmount ? 0 : 300;
                    } else if (radio.value === 'post') {
                        deliveryCost = 400;
                    } else if (radio.value === 'pickup') {
                        deliveryCost = 0;
                    }
                }
            });

            if (shippingElement) {
                shippingElement.textContent = deliveryCost === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : RetroShop.utils.formatPrice(deliveryCost);
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –∫—É—Ä—å–µ—Ä–∞
            const courierPriceElement = document.getElementById('delivery-courier-price');
            if (courierPriceElement) {
                courierPriceElement.textContent = cart.total >= RetroShop.config.freeShippingAmount ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : '300 ‚ÇΩ';
            }

            // –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
            const finalTotal = cart.total + deliveryCost;
            if (finalTotalElement) {
                finalTotalElement.textContent = RetroShop.utils.formatPrice(finalTotal);
            }

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
            if (submitButton) {
                submitButton.disabled = false;
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            updateCheckoutSummary();

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
            const deliveryRadios = document.querySelectorAll('input[name="delivery"]');
            deliveryRadios.forEach(radio => {
                radio.addEventListener('change', updateCheckoutSummary);
            });

            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω–µ
            const originalUpdateUI = RetroShop.cart.updateUI;
            RetroShop.cart.updateUI = function() {
                originalUpdateUI.call(this);
                updateCheckoutSummary();
            };
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
        document.getElementById('checkout-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            RetroShop.processCheckout();
        });
    </script>
</body>
</html>